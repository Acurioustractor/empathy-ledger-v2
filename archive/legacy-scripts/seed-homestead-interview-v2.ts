import { createServiceRoleClient } from '../src/lib/supabase/service-role-client'

async function seedHomesteadInterview() {
  const supabase = createServiceRoleClient()

  const projectId = 'd10daf41-02ae-45e4-9e9b-1c96e56ee820' // The Homestead
  const organizationId = 'c53077e1-98de-4216-9149-6268891ff62e' // Oonchiumpa

  // Full interview transcript from the Ross+Nic Chat
  const interviewTranscript = `
# The Homestead Restoration Project - Seed Interview

## Project Overview
**What is this project trying to achieve?**

This project aims to restore a homestead that has been returned to the Bloomfield family through native title. The family received a $100,000 grant through Ingerika Services (an Aboriginal-controlled organization) for roof repairs after termite damage. Previous contractors deemed the project "impossible" or recommended demolition. The main goals are:

1. Restore structural integrity of the termite-damaged roof
2. Make the homestead safe and habitable for the Bloomfield family
3. Create a collaborative cultural exchange between the restoration team and the family
4. Transform a place with a difficult past into a foundation for the family's future
5. Build family capacity for ongoing maintenance and future projects

## Community Need
**What community need or opportunity does this project address?**

The Bloomfield family recently received native title to this homestead, which has a sobering past as a place that involved exclusion of the family and extraction from the land. For approximately 3-5 years, the family has been unable to occupy or use the property due to severe termite damage that Ingerika Services couldn't find contractors to repair.

This project addresses:
- The immediate need for safe, habitable housing for the family
- The cultural need to reclaim and restore a significant place on country
- The opportunity to demonstrate that "impossible" restoration projects can succeed with proper resources and partnership
- The family's vision for a gathering place and economic foundation for future generations
- The gap in construction services willing to work on remote Indigenous properties

## Target Population
**Who are you working with?**

Primary beneficiaries: The Bloomfield family, a large extended Aboriginal family group (potentially 5-50 members participating)

The project involves direct collaboration with:
- Traditional owners who recently received native title
- Multi-generational family members with varying skills and interests
- Community members experienced with working in extreme remote conditions
- Families who have been excluded from this land in the past

The restoration will be conducted alongside the family, not as separate "expert" contractors. The team will be the only white people present, working as welcomed outsiders in the family's space.

## Expected Outcomes
**What specific outcomes do you expect to see?**

### Immediate Outcomes (During 7-day project):
- Structurally sound, weatherproof roof preventing further deterioration
- Safe removal of hazardous asbestos from designated areas
- Clean, organized work site with debris removed
- Undercover workspace created from fire-damaged shed
- Basic lighting installed for nighttime use
- Strong relationships built between restoration team and family

### Medium-term Outcomes (1-2 years):
- Habitable homestead that family can occupy and use
- Foundation for family gatherings and cultural events
- Family equipped with tools and skills for ongoing maintenance ($2K donated tools)
- Platform for additional improvements (doors, strengthening, finishing)
- Demonstrated model for future remote restoration projects

### Long-term Outcomes (3+ years):
- Economic opportunities for family on their land
- Inter-generational gathering place supporting cultural continuity
- Evidence that "impossible" projects are achievable with proper partnership
- Network of skilled supporters for future Indigenous property projects
- Transformation of a place of exclusion into a foundation for family strength

## Success Indicators
**How will you know if the project is successful?**

We'll observe and hear:

### Construction Success:
- "The roof doesn't leak anymore"
- Family able to sleep inside safely
- No further termite damage or structural deterioration
- All asbestos safely removed from designated areas
- Shed providing useful undercover workspace

### Cultural Success:
- Strong, ongoing relationships with Bloomfield family
- Team members describe being "culturally enlightened" and enriched
- Family excited about future improvements to the property
- Photos and stories of family gathering at the homestead
- Family using donated tools for maintenance and future projects

### Capacity Building Success:
- Family members demonstrating new construction skills
- Family confident to tackle future improvements independently
- Other families approaching team about "impossible" projects
- Contractors reconsidering what's achievable in remote locations

### Process Success:
- Everyone remained safe and healthy throughout
- Team describes experience as fun and meaningful, not just "surviving"
- 95% of time characterized by laughter and connection
- Both team and family feel supported and valued
- Cultural exchange felt authentic and respectful

## Timeframe
**What is the timeframe for this project?**

### Immediate Phase (7 days):
- Days 1-2: Site preparation, asbestos removal, generator setup
- Days 3-5: Roof structure repair and replacement
- Days 6-7: Shed cladding, lighting installation, finishing touches

Work schedule will adapt to extreme heat (30-50¬∞C):
- Potentially early morning (5am-10am) and evening shifts
- May work through nights with proper lighting once roof removed
- Flexible completion - could finish in 5 days, party in Alice 3 days

### Medium-term (1-2 years):
- Family continues improvements using donated tools
- Additional phases for doors, internal finishing, strengthening
- Other families or communities approach for similar projects

### Long-term (5-10 years):
- Homestead becomes established family gathering place
- Economic activities based from the property
- Model replicated in other remote Indigenous communities

## Program Model
**How does the project work?**

### Approach
This project operates on a partnership model rather than traditional contractor-client relationship. A 7-person skilled team from Brisbane (carpenters, trades, project managers) works alongside the Bloomfield family for 7 days, bringing specialized construction knowledge while respecting family leadership and cultural authority.

The team receives compensation (140/hour, 10-hour days, 7 days) but approaches the work as cultural exchange and relationship-building as much as construction. The philosophy acknowledges that even 5 days of excellent work followed by 3 days of cultural connection would represent project success.

### Key Methods:
**Structural Assessment & Planning:**
- Professional asbestos report mapping safe/unsafe zones
- Building engineer assessment (though outcome was "uninhabitable" - which was already obvious)
- On-ground assessment after removing roof sheets to determine actual termite damage
- Flexible planning based on extreme heat conditions

**Construction Methodology:**
- Build temporary bracing under damaged roof sections
- Remove existing sheets to assess damage
- Rebuild destroyed pink section, repair green section
- Install new battens and sheets ($8K materials pre-ordered)
- Create undercover workspace by cladding fire-damaged shed
- Add basic LED lighting and festoon lights for celebration

**Safety Protocols:**
- Full-time paramedic present (Royal Flying Doctor Service)
- Mapped asbestos zones with clear boundaries
- Heat management through flexible work schedules
- Proper PPE including fly nets
- Emergency evacuation plan (3-hour drive to Alice)

**Resource Management:**
- Team bringing 14 batteries (2 per person on flights)
- $2K budget for tools to be donated to family
- Hire equipment (compound saw, trestles, trailer)
- Materials ordered in advance ($8K timber, sheets, battens)
- Redundant generators for power

### Cultural Integration:
Work happens alongside family, not separate from them. Family leads on cultural protocols, timing, and decision-making. Team operates as welcomed outsiders learning from the family as much as providing construction expertise. Tools and skills are intentionally left behind for family capacity building.

## Cultural Approaches
**Specific cultural practices, protocols, or approaches:**

### Land and Place:
- Acknowledgment of homestead's difficult history (place of exclusion)
- Recognition of significance of native title return to family
- Respectful approach to transforming place from past pain to future strength
- Working on country under family's guidance and authority

### Relationship Building:
- Team as guests in family space, not external experts
- Multi-generational engagement with family members
- Expectation that cultural learning is as valuable as construction outcomes
- Building lasting relationships extending beyond single project

### Practical Protocols:
- Family determines work rhythms and breaks
- Respectful adaptation to remote living conditions
- Family managing catering and accommodation hosting
- Recognition that family members have deep knowledge of working in extreme heat
- Starlink connectivity maintained for family communication needs

### Reconciliation Through Action:
- Demonstrating that projects deemed "impossible" by others can succeed
- Partnership model that respects Indigenous knowledge and leadership
- Leaving capacity (tools, skills) with family rather than dependency
- Honoring place transformation while acknowledging difficult history

## Key Activities
**Main activities and services:**

1. **Site Safety & Preparation**
   - Clean and secure work site with family assistance
   - Remove broken asbestos tiles (front and back rooms)
   - Set up generator and power distribution
   - Establish undercover workspace

2. **Structural Repairs**
   - Build temporary bracing under damaged sections
   - Remove existing roof sheets (assess termite damage)
   - Rebuild pink section roof structure (completely destroyed)
   - Repair green section roof structure (partial damage)
   - Install new roof battens and sheets

3. **Additional Improvements**
   - Clad fire-damaged shed for workspace
   - Install LED panel lighting inside
   - Hang festoon lights for outdoor areas
   - Potentially add 3 external doors for lock-up stage
   - Add roof strengthening in additional areas

4. **Capacity Building**
   - Work alongside family members, teaching skills
   - Donate construction tools ($2K worth)
   - Leave detailed documentation of what was done
   - Build relationships for ongoing support

5. **Cultural Exchange**
   - Team learning to work on country
   - Sharing meals and stories with family
   - Experiencing remote Indigenous living conditions
   - Building understanding across cultures

## Community Involvement
**How are community members involved?**

The Bloomfield family has full leadership and decision-making authority:

- Family applied for original $100K grant through Ingerika Services
- Family determines timing, scope, and priorities
- Family members actively participate in construction work
- Family manages accommodation and catering
- Family decides which members participate (5-50 potentially)
- Family will inherit all tools and determine future improvements
- Family guides cultural protocols and appropriate behavior
- Family determines if/when to return for future phases

This is essentially a family project that they're inviting skilled supporters to help with, not a project being done "to" or "for" them.

## Unique Aspects
**What makes this project unique?**

### Partnership Model:
- Not contractor-client but genuine collaboration
- Paid team who also approach work as cultural exchange
- Success measured in relationships as much as construction
- Tools and skills intentionally left with family

### "Impossible" Made Possible:
- Previous contractors declared it couldn't be done
- Demonstrates what's achievable with proper resources and respect
- Remote location (250km from Alice, mostly off-road)
- Extreme conditions (30-50¬∞C, heavy flies, no power, basic accommodation)

### Cultural Reconciliation:
- Place with history of exclusion transformed to family foundation
- Native title creating opportunity for restoration and reclamation
- Aboriginal-controlled organization (Ingerika) funding the work
- Team working as welcomed outsiders on country

### Practical Innovation:
- Flexible work schedule adapting to extreme heat
- Potential night work with lighting
- Creative solutions to remote logistics (battery limits, material transport)
- $100K budget achieving "impossible" restoration

### Authentic Experience:
- No sanitized accommodation or conditions
- Working alongside family in genuine partnership
- Remote immersion rather than day trips from town
- Team members expected to be challenged and transformed

## Challenges
**Main challenges and barriers:**

### Environmental:
- Extreme heat (30-50¬∞C expected)
- Heavy fly presence in remote location
- No running power (generator hookup required)
- 3-hour drive from Alice Springs (80-100km bitumen, rest off-road)
- Basic accommodation (between camping and 0.5 star)
- Potential afternoon storms

### Structural:
- Pink section of roof completely destroyed by termites
- Unknown extent of damage until sheets removed
- Mud brick/rammed earth walls (delicate work required)
- Fire-damaged shed needs creative solutions
- Building currently uninhabitable

### Safety:
- Asbestos in multiple mapped locations
- Working at heights on damaged structure
- Heat stress management for team
- Remote location limits emergency response
- Family and team mixing with different PPE experience levels

### Logistical:
- Battery limits for power tools (2 per person on flights, 14 total)
- Material transport to remote location
- Uncertainty around exact family participation numbers
- Accommodation may not be fully ready
- Potential need for supply runs to Alice

### Resource Constraints:
- Limited remaining budget for contingencies
- Cannot wire building for power (out of scope)
- Time constraint (7 days planned)
- Remote location complicates hiring additional equipment

### Cultural Sensitivity:
- Team as outsiders working on family's country
- Balancing professional standards with cultural respect
- Managing heat in ways family doesn't typically need to
- Ensuring family leads despite team bringing expertise

## Support Needed
**What support or resources would help this project succeed?**

### Equipment & Materials:
- Additional power tool batteries beyond flight limits
- Compound mitre saw rental
- Trestles and ladders from Kennards
- Fly nets (often sold out)
- Work lights for potential night work
- Materials already ordered ($8K worth)

### Funding:
- $2K for tools to donate to family
- Contingency for unexpected supply runs
- Potential additional costs for equipment rental

### Expertise:
- Heat management strategies for extreme conditions
- Remote construction best practices
- Asbestos removal guidance for specific tile removal
- Night work safety protocols
- Structural assessment after sheet removal

### Practical Support:
- Transportation logistics (trailer, roof racks)
- Accommodation backup plans
- Supply chain coordination from Alice
- Communication infrastructure (Starlink working properly)

### Future Support:
- Ongoing relationship for technical advice
- Network for family to access for future phases
- Model documentation for other remote projects
- Connections to other families facing similar challenges

## Long-term Vision
**Where do you see this in 5-10 years?**

### For the Homestead:
In 5-10 years, the homestead is a thriving multi-generational family gathering place. The roof repair from this first project sparked a series of improvements that the family led using donated tools and skills. The property now hosts regular family gatherings, cultural events, and perhaps economic activities that provide income and purpose.

The transformation from "impossible" project to family asset demonstrates what's achievable when proper resources meet cultural respect and genuine partnership.

### For the Model:
This project becomes a reference point - proof that remote Indigenous property restoration can succeed. Other families approach the team about their "impossible" projects. Contractors reconsider what's achievable. The partnership model (paid skilled team + family leadership + capacity building) gets replicated in other communities.

The network of 65+ people involved becomes an informal collective willing to support future Indigenous property projects.

### For Reconciliation:
The homestead represents tangible reconciliation - a place that excluded Indigenous people now serving as foundation for Indigenous family strength. The restoration process itself becomes a story of cross-cultural partnership, with team members carrying cultural insights into their other work.

The project demonstrates that reconciliation isn't just about acknowledgment but about resourced action creating lasting change.

### For the Bloomfield Family:
In 10 years, younger family members tell stories about "when the Brisbane team came" as a turning point. The homestead enables cultural continuity, economic opportunities, and family cohesion that weren't possible when it was in ruins. The donated tools have enabled multiple other improvements and perhaps even income generation through construction work.

The family has become mentors to other families undertaking similar restorations, sharing what they learned.
`

  console.log('üìù Submitting seed interview for The Homestead project...\n')

  // Check for existing context
  const { data: existingContext } = await supabase
    .from('project_contexts')
    .select('id')
    .eq('project_id', projectId)
    .single()

  const contextData = {
    project_id: projectId,
    organization_id: organizationId,
    seed_interview_text: interviewTranscript,
    context_type: 'full',
    ai_extracted: false, // We're providing structured content directly
    updated_at: new Date().toISOString()
  }

  if (existingContext) {
    // Update existing
    const { error: updateError } = await supabase
      .from('project_contexts')
      .update(contextData)
      .eq('project_id', projectId)

    if (updateError) {
      console.error('‚ùå Error updating project context:', updateError)
      throw updateError
    }

    console.log('‚úÖ Updated existing project context with seed interview')
  } else {
    // Create new
    const { error: insertError } = await supabase
      .from('project_contexts')
      .insert({
        ...contextData,
        created_at: new Date().toISOString()
      })

    if (insertError) {
      console.error('‚ùå Error creating project context:', insertError)
      throw insertError
    }

    console.log('‚úÖ Created new project context with seed interview')
  }

  console.log('\nüìä Seed Interview Summary:')
  console.log(`- Project: The Homestead`)
  console.log(`- Organization: Oonchiumpa`)
  console.log(`- Interview Length: ${interviewTranscript.length} characters`)
  console.log(`- Format: Structured Q&A with full context`)

  console.log('\n‚ú® Seed interview successfully saved!')
  console.log('\nNext steps:')
  console.log('1. Visit: http://localhost:3000/organisations/c53077e1-98de-4216-9149-6268891ff62e/projects/d10daf41-02ae-45e4-9e9b-1c96e56ee820/manage')
  console.log('2. Navigate to the Context tab to view the seed interview')
  console.log('3. Use the "Generate Outcomes" feature to extract outcomes from this context')
}

seedHomesteadInterview().catch(console.error)

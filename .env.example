# ============================================================================
# EMPATHY LEDGER - ENVIRONMENT CONFIGURATION
# ============================================================================
#
# SETUP INSTRUCTIONS:
# 1. Copy this file to .env.local: cp .env.example .env.local
# 2. Fill in the values below
# 3. Never commit .env.local to git (it's in .gitignore)
#
# KEY ROTATION REMINDERS:
# - Rotate API keys every 90 days
# - Rotate immediately if exposed
# - Use different keys for dev/staging/prod
#
# ============================================================================

# ============================================================================
# SUPABASE (Required)
# Get these from: https://app.supabase.com/project/YOUR_PROJECT/settings/api
# ============================================================================

# Project URL - safe to expose (used client-side)
NEXT_PUBLIC_SUPABASE_URL=https://YOUR_PROJECT_REF.supabase.co

# Anon Key - safe to expose (respects Row Level Security)
# Used for client-side queries, RLS controls access
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJ...

# Service Role Key - NEVER expose! Server-side only, bypasses RLS
# Used for admin operations, webhooks, background jobs
SUPABASE_SERVICE_ROLE_KEY=eyJ...

# Direct Database URL (for migrations, Prisma, etc.)
# Format: postgresql://postgres.[ref]:[password]@[host]:6543/postgres
# Get from: Project Settings > Database > Connection string (URI)
DATABASE_URL=postgresql://postgres.YOUR_REF:YOUR_PASSWORD@aws-0-ap-southeast-2.pooler.supabase.com:6543/postgres

# MCP Access Token (for CI/automation with Supabase MCP)
# Generate at: https://app.supabase.com/dashboard/account/tokens
# SUPABASE_ACCESS_TOKEN=sbp_...

# ============================================================================
# APPLICATION SETTINGS
# ============================================================================

# App URL - for OAuth callbacks, email links, etc.
NEXT_PUBLIC_APP_URL=http://localhost:3000

# Development Super Admin (bypass auth for local testing)
# Set to your email to auto-grant super admin in development
NEXT_PUBLIC_DEV_SUPER_ADMIN_EMAIL=your-email@example.com

# ============================================================================
# AI CONFIGURATION
# ============================================================================

# LLM Provider: 'ollama' (free, local) or 'openai' (paid, cloud)
LLM_PROVIDER=ollama

# Ollama Settings (for local AI - free and unlimited)
# Install: brew install ollama && ollama pull llama3.1:8b
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_MODEL=llama3.1:8b

# OpenAI (only if LLM_PROVIDER=openai)
# Get from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-proj-...

# Anthropic Claude (for advanced analysis)
# Get from: https://console.anthropic.com/settings/keys
ANTHROPIC_API_KEY=sk-ant-...

# ============================================================================
# CULTURAL SAFETY & OCAP COMPLIANCE
# Indigenous Data Sovereignty principles
# ============================================================================

# Enable cultural sensitivity checking in AI outputs
ENABLE_CULTURAL_SAFETY=true

# Require elder approval for sensitive content
ENABLE_ELDER_REVIEW=true

# Track and audit all consent interactions
ENABLE_CONSENT_TRACKING=true

# ============================================================================
# FILE UPLOAD LIMITS
# ============================================================================

MAX_FILE_SIZE_MB=50
ALLOWED_IMAGE_TYPES=image/jpeg,image/png,image/webp,image/avif
ALLOWED_VIDEO_TYPES=video/mp4,video/webm,video/quicktime
ALLOWED_AUDIO_TYPES=audio/mp3,audio/wav,audio/ogg

# ============================================================================
# INNGEST (Background Jobs)
# Get from: https://app.inngest.com/env/production/manage/keys
# ============================================================================

# Event key for sending events
INNGEST_EVENT_KEY=

# Signing key for webhook verification
INNGEST_SIGNING_KEY=signkey-...

# Local dev server URL (use http://localhost:8288 for local)
INNGEST_BASE_URL=http://localhost:8288

# ============================================================================
# RESEARCH & SEARCH TOOLS
# ============================================================================

# Tavily AI - Web search for research features
# Get from: https://app.tavily.com/ (Free tier: 1000 req/month)
TAVILY_API_KEY=tvly-...

# ============================================================================
# GOOGLE OAUTH (Optional - for Calendar & Gmail integration)
# Set up OAuth app: https://console.cloud.google.com/apis/credentials
# ============================================================================

# These tokens expire - refresh periodically or use refresh token flow
# GOOGLE_ACCESS_TOKEN=ya29...
# GOOGLE_REFRESH_TOKEN=1//...

# ============================================================================
# MONITORING & ANALYTICS (Optional)
# ============================================================================

# Error tracking with Sentry
# Get from: https://sentry.io/settings/projects/
# SENTRY_DSN=https://...@sentry.io/...

# Google Analytics
# GOOGLE_ANALYTICS_ID=G-...

# ============================================================================
# EMAIL CONFIGURATION (Optional)
# ============================================================================

# SMTP settings for transactional emails
# SMTP_HOST=smtp.sendgrid.net
# SMTP_PORT=587
# SMTP_USER=apikey
# SMTP_PASSWORD=SG...
# FROM_EMAIL=noreply@empathyledger.org

# ============================================================================
# SECURITY KEYS (Generate unique values!)
# ============================================================================

# JWT secret for custom token signing
# Generate: openssl rand -base64 32
# JWT_SECRET=

# Encryption key for sensitive data at rest
# Generate: openssl rand -hex 32
# ENCRYPTION_KEY=

# ============================================================================
# REGISTRY SHARING (External Story Syndication)
# ============================================================================

# ACT Farm Registry API Key
# Used by ACT Farm to fetch syndicated stories from your registry
# Generate: node scripts/data-management/setup-act-farm-registry.js
ACT_FARM_REGISTRY_TOKEN=
